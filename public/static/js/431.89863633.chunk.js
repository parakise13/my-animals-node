"use strict";(self.webpackChunkmy_animal=self.webpackChunkmy_animal||[]).push([[431],{591:function(e,t,a){a.d(t,{Z:function(){return i}});var n=a(885),r=a(791),s=a(184),i=function(e){var t=(0,r.useState)(),a=(0,n.Z)(t,2),i=a[0],l=a[1],u=(0,r.useState)(),o=(0,n.Z)(u,2),p=o[0],c=o[1],d=(0,r.useState)(!1),m=(0,n.Z)(d,2),h=m[0],x=m[1],f=(0,r.useRef)();(0,r.useEffect)((function(){if(i){var e=new FileReader;e.onload=function(){c(e.result)},e.readAsDataURL(i)}}),[i]);return(0,s.jsxs)("div",{className:"form-control",children:[(0,s.jsx)("input",{id:e.id,ref:f,type:"file",accept:".jpg,.png,.jpeg",name:"profile-img",onChange:function(t){var a,n=h;t.target.files&&1===t.target.files.length?(a=t.target.files[0],l(a),x(!0),n=!0):(x(!1),n=!1),e.onInput(e.id,a,n)},style:{display:"none"}}),(0,s.jsxs)("div",{className:"image-upload",children:[(0,s.jsxs)("div",{className:"image-upload__preview",children:[p&&(0,s.jsx)("img",{src:p.toString(),alt:"preview"}),!p&&(0,s.jsx)("p",{children:"\uc0ac\uc9c4\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694."})]}),(0,s.jsx)("button",{type:"button",onClick:function(){f.current.click()},children:"\uc0ac\uc9c4 \uc120\ud0dd"})]}),!h&&"* ".concat(e.errorText)]})}},163:function(e,t,a){a.r(t),a.d(t,{default:function(){return j}});var n=a(214),r=a(861),s=a(413),i=a(885),l=a(158),u=a(871),o=a(591),p=a(534),c=a(612),d=a(791),m=a(581),h=a(388),x=a(89),f={"auth-container":"Auth_auth-container__Gw4AF",auth__title:"Auth_auth__title__NSzsh","auth-form":"Auth_auth-form__Zcx5j","btn-wrapper":"Auth_btn-wrapper__NdBUi"},v=a(436),g=a(184),j=function(){var e=(0,d.useContext)(l.V),t=(0,u.s0)(),a=(0,v.Z)(),j=a.isLoading,Z=a.error,_=a.sendRequest,w=a.clearError,b=(0,d.useState)(!0),k=(0,i.Z)(b,2),y=k[0],N=k[1],S=(0,m.Z)({email:{value:"",isValid:!1},password:{value:"",isValid:!1}},!1),C=(0,i.Z)(S,3),T=C[0],V=C[1],I=C[2],U=function(){var a=(0,r.Z)((0,n.Z)().mark((function a(r){var s,i,l;return(0,n.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(r.preventDefault(),!y){a.next=14;break}return a.prev=2,a.next=5,_("".concat("https://my-animals.herokuapp.com/api","/users/login"),"POST",{"Content-Type":"application/json"},JSON.stringify({email:T.inputs.email.value,password:T.inputs.password.value}));case 5:s=a.sent,e.login(s.userId,s.token),t("/"),a.next=12;break;case 10:a.prev=10,a.t0=a.catch(2);case 12:a.next=29;break;case 14:return a.prev=14,(i=new FormData).append("name",T.inputs.name.value),i.append("email",T.inputs.email.value),i.append("password",T.inputs.password.value),i.append("imageUrl",T.inputs.imageUrl.value),a.next=22,_("".concat("https://my-animals.herokuapp.com/api","/users/signup"),"POST",{},i);case 22:l=a.sent,e.login(l.userId,l.token),t("/"),a.next=29;break;case 27:a.prev=27,a.t1=a.catch(14);case 29:case"end":return a.stop()}}),a,null,[[2,10],[14,27]])})));return function(e){return a.apply(this,arguments)}}();return(0,g.jsx)(d.Fragment,{children:(0,g.jsxs)("div",{className:f["auth-container"],children:[j&&(0,g.jsx)(h.Z,{isLoading:j}),Z&&(0,g.jsx)(x.Z,{onClose:w,errorText:Z}),(0,g.jsx)("h2",{className:f.auth__title,children:y?"\ub85c\uadf8\uc778\ud558\uae30":"\uac00\uc785\ud558\uae30"}),(0,g.jsxs)("form",{onSubmit:U,className:f["auth-form"],children:[!y&&(0,g.jsx)(p.Z,{id:"name",type:"text",placeholder:"\uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",element:"input",validators:[(0,c.hg)()],onInput:V,errorText:"\uc62c\ubc14\ub978 \uc774\ub984\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."}),!y&&(0,g.jsx)(o.Z,{onInput:V,id:"imageUrl",errorText:"\uc62c\ubc14\ub978 \uc0ac\uc9c4\uc744 \ub123\uc5b4\uc8fc\uc138\uc694."}),(0,g.jsx)(p.Z,{id:"email",type:"text",placeholder:"\uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694.",element:"input",validators:[(0,c.Ox)()],onInput:V,errorText:"\uc62c\ubc14\ub978 \uc774\uba54\uc77c\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."}),(0,g.jsx)(p.Z,{id:"password",type:"password",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.",element:"input",validators:[(0,c.CP)(6)],onInput:V,errorText:"\uc62c\ubc14\ub978 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."}),(0,g.jsx)("div",{className:f["btn-wrapper"],children:(0,g.jsx)("button",{className:f.btn,type:"submit",disabled:!T.isValid,children:y?"\ub85c\uadf8\uc778":"\uac00\uc785\ud558\uae30"})})]}),(0,g.jsx)("div",{className:f["btn-wrapper"],children:(0,g.jsx)("button",{className:f.btn,onClick:function(){y?I((0,s.Z)((0,s.Z)({},T.inputs),{},{name:{value:"",isValid:!1},imageUrl:{value:null,isValid:!1}}),!1):I((0,s.Z)((0,s.Z)({},T.inputs),{},{name:void 0,imageUrl:void 0}),T.inputs.email.isValid&&T.inputs.password.isValid),N((function(e){return!e}))},children:y?"\uac00\uc785\ud558\ub7ec\uac00\uae30":"\ub85c\uadf8\uc778\ud558\ub7ec\uac00\uae30"})})]})})}}}]);
//# sourceMappingURL=431.89863633.chunk.js.map